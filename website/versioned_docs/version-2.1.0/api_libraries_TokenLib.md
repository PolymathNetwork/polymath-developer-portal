---
id: version-2.1.0-version-2.1.0-libraries_TokenLib
title: TokenLib
original_id: version-2.1.0-libraries_TokenLib
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">library</span> TokenLib</h2><div class="source">Source: <a href="https://github.com/PolymathNetwork/polymath-core/blob/v2.1.0/contracts/libraries/TokenLib.sol" target="_blank">contracts/libraries/TokenLib.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="libraries_TokenLib.html#ModuleArchived">ModuleArchived</a></li><li><a href="libraries_TokenLib.html#ModuleUnarchived">ModuleUnarchived</a></li><li><a href="libraries_TokenLib.html#adjustCheckpoints">adjustCheckpoints</a></li><li><a href="libraries_TokenLib.html#adjustInvestorCount">adjustInvestorCount</a></li><li><a href="libraries_TokenLib.html#archiveModule">archiveModule</a></li><li><a href="libraries_TokenLib.html#checkPermission">checkPermission</a></li><li><a href="libraries_TokenLib.html#getValueAt">getValueAt</a></li><li><a href="libraries_TokenLib.html#unarchiveModule">unarchiveModule</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="ModuleArchived" class="anchor-marker"></span><h4 class="name">ModuleArchived</h4><div class="body"><code class="signature">event <strong>ModuleArchived</strong><span>(uint8[] _types, address _module, uint256 _timestamp) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_types</code> - uint8[]</div><div><code>_module</code> - address</div><div><code>_timestamp</code> - uint256</div></dd></dl></div></div></li><li><div class="item event"><span id="ModuleUnarchived" class="anchor-marker"></span><h4 class="name">ModuleUnarchived</h4><div class="body"><code class="signature">event <strong>ModuleUnarchived</strong><span>(uint8[] _types, address _module, uint256 _timestamp) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_types</code> - uint8[]</div><div><code>_module</code> - address</div><div><code>_timestamp</code> - uint256</div></dd></dl></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="adjustCheckpoints" class="anchor-marker"></span><h4 class="name">adjustCheckpoints</h4><div class="body"><code class="signature">function <strong>adjustCheckpoints</strong><span>(TokenLib.Checkpoint[] _checkpoints, uint256 _newValue, uint256 _currentCheckpointId) </span><span>public </span></code><hr/><div class="description"><p>Stores the changes to the checkpoint objects.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_checkpoints</code> - is the affected checkpoint object array</div><div><code>_newValue</code> - is the new value that needs to be stored</div><div><code>_currentCheckpointId</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="adjustInvestorCount" class="anchor-marker"></span><h4 class="name">adjustInvestorCount</h4><div class="body"><code class="signature">function <strong>adjustInvestorCount</strong><span>(InvestorDataStorage _investorData, address _from, address _to, uint256 _value, uint256 _balanceTo, uint256 _balanceFrom) </span><span>public </span></code><hr/><div class="description"><p>Keeps track of the number of non-zero token holders.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_investorData</code> - Date releated to investor metrics</div><div><code>_from</code> - Sender of transfer</div><div><code>_to</code> - Receiver of transfer</div><div><code>_value</code> - Value of transfer</div><div><code>_balanceTo</code> - Balance of the _to address</div><div><code>_balanceFrom</code> - Balance of the _from address</div></dd></dl></div></div></li><li><div class="item function"><span id="archiveModule" class="anchor-marker"></span><h4 class="name">archiveModule</h4><div class="body"><code class="signature">function <strong>archiveModule</strong><span>(ModuleData _moduleData, address _module) </span><span>public </span></code><hr/><div class="description"><p>Archives a module attached to the SecurityToken.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_moduleData</code> - Storage data</div><div><code>_module</code> - Address of module to archive</div></dd></dl></div></div></li><li><div class="item function"><span id="checkPermission" class="anchor-marker"></span><h4 class="name">checkPermission</h4><div class="body"><code class="signature">function <strong>checkPermission</strong><span>(address[] _modules, address _delegate, address _module, bytes32 _perm) </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>This allows individual modules to override this logic if needed (to not allow ST owner all permissions), Validates permissions with PermissionManager if it exists. If there&#x27;s no permission return false.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_modules</code> - is the modules to check permissions on</div><div><code>_delegate</code> - is the address of the delegate</div><div><code>_module</code> - is the address of the PermissionManager module</div><div><code>_perm</code> - is the permissions data</div></dd><dt><span class="label-return">Returns:</span></dt><dd>success</dd></dl></div></div></li><li><div class="item function"><span id="getValueAt" class="anchor-marker"></span><h4 class="name">getValueAt</h4><div class="body"><code class="signature">function <strong>getValueAt</strong><span>(Checkpoint[] _checkpoints, uint256 _checkpointId, uint256 _currentValue) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Queries a value at a defined checkpoint.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_checkpoints</code> - is array of Checkpoint objects</div><div><code>_checkpointId</code> - is the Checkpoint ID to query</div><div><code>_currentValue</code> - is the Current value of checkpoint</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="unarchiveModule" class="anchor-marker"></span><h4 class="name">unarchiveModule</h4><div class="body"><code class="signature">function <strong>unarchiveModule</strong><span>(ModuleData _moduleData, address _module) </span><span>public </span></code><hr/><div class="description"><p>Unarchives a module attached to the SecurityToken.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_moduleData</code> - Storage data</div><div><code>_module</code> - Address of module to unarchive</div></dd></dl></div></div></li></ul></div></div></div>
